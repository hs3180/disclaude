#!/bin/bash
#
# .disclauderc - Disclaude Bash Environment Initialization
#
# This script is automatically sourced when Disclaude starts (before main logic).
# It's similar to .bashrc but specifically for Disclaude service initialization.
#
# IMPORTANT: This file is for BASH environment setup ONLY.
# For application configuration (model, workspace, logging), use disclaude.config.yaml
# For secrets (API keys), use .env file
#
# See docs/CONFIGURATION.md for complete configuration guide.
#
# Usage:
# 1. Copy this file to .disclauderc (remove .example suffix)
# 2. Customize with your environment setup
# 3. Restart Disclaude
#
# Common use cases:
# - Activating conda environments
# - Setting custom PATH variables
# - Loading environment-specific configurations
# - Setting up proxy or network configurations
#

# =============================================================================
# Conda Environment Setup
# =============================================================================

# Example: Activate a conda environment (e.g., falcon)
# This ensures that Python subprocesses run in the correct conda environment
#
# Uncomment and modify the line below:
# source ~/anaconda/anaconda3/bin/activate falcon

# Example: Set CONDA environment variables explicitly
# export CONDA_DEFAULT_ENV="falcon"
# export CONDA_PREFIX="$HOME/anaconda/anaconda3/envs/falcon"

# =============================================================================
# Custom PATH Setup
# =============================================================================

# Add custom binaries to PATH
# These will be available to Disclaude and any subprocesses it spawns
#
# export PATH="$HOME/custom/bin:$PATH"

# Example: Add conda environment to PATH (if not using activate)
# export PATH="$HOME/anaconda/anaconda3/envs/falcon/bin:$PATH"
# export PATH="$HOME/anaconda/anaconda3/condabin:$PATH"

# =============================================================================
# Python Configuration
# =============================================================================

# Explicitly set Python interpreter for subprocesses
# export PYTHON="$HOME/anaconda/anaconda3/envs/falcon/bin/python"

# Set Python path if needed
# export PYTHONPATH="$HOME/anaconda/anaconda3/envs/falcon/lib/python3.12/site-packages"

# =============================================================================
# Network/Proxy Configuration
# =============================================================================

# Example: Set HTTP proxy for API calls
# export HTTP_PROXY="http://proxy.example.com:8080"
# export HTTPS_PROXY="http://proxy.example.com:8080"
# export NO_PROXY="localhost,127.0.0.1"

# =============================================================================
# Application-Specific Variables
# =============================================================================

# Example: Set workspace directory for file operations
# export WORKSPACE_DIR="$HOME/disclaude-workspace"

# Example: Override model selection
# export CLAUDE_MODEL="claude-3-5-sonnet-20241022"

# Example: Set log level
# export LOG_LEVEL="debug"

# =============================================================================
# Debugging and Diagnostics
# =============================================================================

# Uncomment to enable verbose subprocess logging
# export DEBUG="*"

# Uncomment to trace shell execution
# export BASH_XTRACEFD=1
# set -x  # Enable bash tracing (useful for debugging this script)

# =============================================================================
# Notes
# =============================================================================
#
# - This script runs in a bash shell before Disclaude initializes
# - Environment variables set here are available to Disclaude process
# - Only NEW variables are exported; existing process.env is not overwritten
# - Script errors are logged but don't prevent Disclaude from starting
# - Keep this script lightweight to avoid delaying service startup
#
# For debugging:
# 1. Run: disclaude --prompt "test"  # Check logs for env loading
# 2. Look for: "Environment initialization script loaded" message
# 3. Check PM2 logs: pm2 logs disclaude-feishu
#
